{"version":3,"file":"commonHelpers.js","sources":["../src/api/getTicketsApi.js","../src/js/hero.js","../src/js/cardsmodal.js"],"sourcesContent":["export const getTickets = async (keyword, country, page) => {\n  const response = await fetch(\n    `https://app.ticketmaster.com/discovery/v2/events.json?apikey=Z85ENznHLZiiD4emV1glh7STR86oVhNw&keyword=${encodeURIComponent(\n      keyword\n    )}&countryCode=${country}&page=${page}`\n  );\n\n  const data = await response.json();\n  return data;\n};\n","import { getTickets } from '../api/getTicketsApi';\n\nconst inputEl = document.querySelector('.hero__input');\nconst listEl = document.querySelector('.cards__list');\nconst selectEl = document.querySelector('.hero__country');\nconst cardsSchedule = document.querySelector('.cards__schedule');\n\nlet currentPage = 0;\nlet totalPage = 1;\n\n\nasync function renderTicket(page = 0) {\n  try {\n    \n    const data = await getTickets(\n      inputEl?.value || '',\n      selectEl?.value || '',\n      page\n    );\n\n    const tickets = data?._embedded?.events || [];\n    totalPage = data?.page?.totalPages > 50 ? 50 : data?.page?.totalPages || 1;\n    currentPage = page;\n\n    const markup = tickets\n      .map(\n        item => `\n        <li class=\"cards__item\">\n            <img src=\"${item.images?.[0]?.url || '/img/placeholderimg.png'}\" \n                 alt=\"${item.name}\"\n                 class=\"cards__img\">\n            <div class=\"cards__item-contentb\">\n                <h1 class=\"cards__title\">${item.name}</h1>\n                <h2 class=\"cards__subtitle\">${\n                  item.dates?.start?.localDate || ''\n                }</h2>\n                <p class=\"cards__text\">\n                    <svg class=\"cards__svg\"><use href=\"/img/symbol-defs.svg#icon-arrow\"></use></svg>\n                    ${item._embedded?.venues?.[0]?.name || 'Unknown Venue'}\n                </p>\n            </div>\n        </li>`\n      )\n      .join('');\n\n    listEl.innerHTML = markup;\n\n    renderPagination();\n  } catch (error) {\n    console.error('Помилка:', error);\n    listEl.innerHTML = '<p>Помилка завантаження даних.</p>';\n    cardsSchedule.innerHTML = '';\n  }\n}\n\n\nfunction renderPagination() {\n  cardsSchedule.innerHTML = '';\n  if (totalPage <= 1) return;\n\n\n  let startPage, endPage;\n\n  if (totalPage <= 5) {\n    startPage = 0;\n    endPage = totalPage;\n  } else {\n    if (currentPage <= 2) {\n      startPage = 0;\n      endPage = 5;\n    } else if (currentPage + 2 >= totalPage) {\n      startPage = totalPage - 5;\n      endPage = totalPage;\n    } else {\n      startPage = currentPage - 2;\n      endPage = currentPage + 3;\n    }\n  }\n\n\n  for (let i = startPage; i < endPage; i += 1) {\n    const li = document.createElement('li');\n    li.className = `cards__schedule-item ${\n      i === currentPage ? 'active-page' : ''\n    }`;\n    li.innerHTML = `<p class=\"cards__schedule-text\">${i + 1}</p>`;\n\n    li.addEventListener('click', () => {\n      if (i === currentPage) return; \n      window.scrollTo({ top: 0, behavior: 'smooth' });\n      renderTicket(i);\n    });\n\n    cardsSchedule.appendChild(li);\n  }\n}\n\n\n\n\nrenderTicket(0);\n\n\ninputEl?.addEventListener('change', () => renderTicket(0));\nselectEl?.addEventListener('change', () => renderTicket(0));\n","const backdrop = document.querySelector('.backdrop');\nconst closeModal = document.querySelector('.modal__close');\nconst cardsList = document.querySelector('.cards__list'); // контейнер усіх карток\n\nfunction modalHandler() {\n  backdrop.classList.toggle('is__hidden');\n  document.body.classList.toggle('no-scroll');\n}\n\ncardsList.addEventListener('click', (e) => {\n  if (e.target.closest('.cards__item')) {\n    modalHandler();\n  }\n});\n\nif (closeModal) {\n  closeModal.addEventListener('click', modalHandler);\n}\n\nbackdrop.addEventListener('click', (e) => {\n  if (e.target === backdrop) modalHandler();\n});\n"],"names":["getTickets","keyword","country","page","inputEl","listEl","selectEl","cardsSchedule","currentPage","totalPage","renderTicket","data","tickets","_a","_b","_c","markup","item","_d","_g","_f","_e","renderPagination","error","startPage","endPage","i","li","backdrop","closeModal","cardsList","modalHandler","e"],"mappings":"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"}