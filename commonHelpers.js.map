{"version":3,"file":"commonHelpers.js","sources":["../src/api/getTicketsApi.js","../src/js/hero.js","../src/js/cardsmodal.js"],"sourcesContent":["export const getTickets = async (keyword, country, page) => {\n  const response = await fetch(\n    `https://app.ticketmaster.com/discovery/v2/events.json?apikey=Z85ENznHLZiiD4emV1glh7STR86oVhNw&keyword=${encodeURIComponent(\n      keyword\n    )}&countryCode=${country}&page=${page}`\n  );\n\n  const data = await response.json();\n  return data;\n};\n","import { getTickets } from '../api/getTicketsApi';\n\nconst inputEl = document.querySelector('.hero__input');\nconst listEl = document.querySelector('.cards__list');\nconst selectEl = document.querySelector('.hero__country');\nconst cardsSchedule = document.querySelector('.cards__schedule');\n\nlet currentPage = 0;\nlet totalPage = 1;\n\nexport let ticketsData = [];\n\nasync function renderTicket(page = 0) {\n  try {\n    \n    const data = await getTickets(\n      inputEl?.value || '',\n      selectEl?.value || '',\n      page\n    );\n\n    const tickets = data?._embedded?.events || [];\n    totalPage = data?.page?.totalPages > 50 ? 50 : data?.page?.totalPages || 1;\n    currentPage = page;\n\n    ticketsData = tickets;\n\n    const markup = tickets\n      .map(\n        item => `\n        <li class=\"cards__item\" data-id=\"${item.id}\">\n            <img src=\"${item.images?.[0]?.url || '/img/placeholderimg.png'}\" \n                 alt=\"${item.name}\"\n                 class=\"cards__img\">\n            <div class=\"cards__item-contentb\">\n                <h1 class=\"cards__title\">${item.name}</h1>\n                <h2 class=\"cards__subtitle\">${\n                  item.dates?.start?.localDate || ''\n                }</h2>\n                <p class=\"cards__text\">\n                    <svg class=\"cards__svg\"><use href=\"/img/symbol-defs.svg#icon-arrow\"></use></svg>\n                    ${item._embedded?.venues?.[0]?.name || 'Unknown Venue'}\n                </p>\n            </div>\n        </li>`\n      )\n      .join('');\n\n    listEl.innerHTML = markup;\n\n    renderPagination();\n  } catch (error) {\n    console.error('Error:', error);\n    listEl.innerHTML = '<p>Error</p>';\n    cardsSchedule.innerHTML = '';\n  }\n}\n\n\nfunction renderPagination() {\n  cardsSchedule.innerHTML = '';\n  if (totalPage <= 1) return;\n\n\n  let startPage, endPage;\n\n  if (totalPage <= 5) {\n    startPage = 0;\n    endPage = totalPage;\n  } else {\n    if (currentPage <= 2) {\n      startPage = 0;\n      endPage = 5;\n    } else if (currentPage + 2 >= totalPage) {\n      startPage = totalPage - 5;\n      endPage = totalPage;\n    } else {\n      startPage = currentPage - 2;\n      endPage = currentPage + 3;\n    }\n  }\n\n\n  for (let i = startPage; i < endPage; i += 1) {\n    const li = document.createElement('li');\n    li.className = `cards__schedule-item ${\n      i === currentPage ? 'active-page' : ''\n    }`;\n    li.innerHTML = `<p class=\"cards__schedule-text\">${i + 1}</p>`;\n\n    li.addEventListener('click', () => {\n      if (i === currentPage) return; \n      window.scrollTo({ top: 0, behavior: 'smooth' });\n      renderTicket(i);\n    });\n\n    cardsSchedule.appendChild(li);\n  }\n}\n\n\n\n\nrenderTicket(0);\n\n\ninputEl?.addEventListener('change', () => renderTicket(0));\nselectEl?.addEventListener('change', () => renderTicket(0));\n","import { ticketsData } from './hero';\n\nconst backdrop = document.querySelector('.backdrop');\nconst closeModal = document.querySelector('.modal__close');\nconst cardsList = document.querySelector('.cards__list');\n\nconst modalImg = document.querySelector('.modal__img');\nconst modalImage = document.querySelector('.modal__image');\nconst modalTitle = document.querySelector('.title');\nconst modalDate = document.querySelector('.date');\nconst modalVenue = document.querySelector('.venue');\nconst modalDescription = document.querySelector('.description');\nconst modalPriceStandart = document.querySelector('.pstandart');\nconst modalPriceVip = document.querySelector('.pvip');\n\nfunction modalHandler() {\n  backdrop.classList.toggle('is__hidden');\n  document.body.classList.toggle('no-scroll');\n}\n\nfunction updateModalInfo(evt) {\n  const card = evt.target.closest('.cards__item');\n  if (!card) return;\n\n  const id = card.dataset.id;\n  const ticket = ticketsData.find(item => item.id === id);\n  if (!ticket) return;\n\n  modalImg.src = ticket.images?.[0]?.url || '/img/placeholderimg.png';\n  modalImage.src = ticket.images?.[0]?.url || '/img/placeholderimg.png';\n  modalTitle.textContent = ticket.name;\n  modalDate.textContent = ticket.dates?.start?.localDate || 'Unknown date';\n  modalVenue.textContent =\n    ticket._embedded?.venues?.[0]?.name || 'Unknown venue';\n  modalDescription.textContent =\n    ticket.info || ticket.pleaseNote || 'No additional information';\n\n  const prices = ticket.priceRanges || [];\n\n  const standart = prices.find(p => p.type?.toLowerCase() === 'standard');\n  const vip = prices.find(p => p.type?.toLowerCase() === 'vip');\n\n  function formatPrice(p) {\n    if (!p) return 'Not available';\n    if (p.min === p.max) return `${p.min} ${p.currency}`;\n    return `${p.min}â€“${p.max} ${p.currency}`;\n  }\n\n  modalPriceStandart.innerHTML = `\n    <svg class=\"modal__svg\">\n      <use href=\"./img/symbol-defs.svg#icon-ticket\"></use>\n    </svg>\n    Standart ${formatPrice(standart)}\n  `;\n\n  modalPriceVip.innerHTML = `\n    <svg class=\"modal__svg\">\n      <use href=\"./img/symbol-defs.svg#icon-ticket\"></use>\n    </svg>\n    VIP ${formatPrice(vip)}\n  `;\n}\n\ncardsList.addEventListener('click', e => {\n  if (e.target.closest('.cards__item')) {\n    updateModalInfo(e);\n    modalHandler();\n  }\n});\n\ncloseModal?.addEventListener('click', modalHandler);\n\nbackdrop.addEventListener('click', e => {\n  if (e.target === backdrop) modalHandler();\n});\n"],"names":["getTickets","keyword","country","page","inputEl","listEl","selectEl","cardsSchedule","currentPage","totalPage","ticketsData","renderTicket","data","tickets","_a","_b","_c","markup","item","_d","_g","_f","_e","renderPagination","error","startPage","endPage","i","li","backdrop","closeModal","cardsList","modalImg","modalImage","modalTitle","modalDate","modalVenue","modalDescription","modalPriceStandart","modalPriceVip","modalHandler","updateModalInfo","evt","card","id","ticket","_i","_h","prices","standart","p","vip","formatPrice","e"],"mappings":"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"}